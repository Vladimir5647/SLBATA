@model string
@using CapaPresentacion.Controllers;

@Html.DevExpress().FileManager(settings => {
    settings.Name = "FileManager";
    settings.CallbackRouteValues = new { Controller = "Comunicado", Action = "FileManagerPartial" };

    settings.DownloadRouteValues = new { Controller = "Comunicado", Action = "FileManagerPartialDownload" };
    settings.SettingsEditing.AllowDownload = true;

    settings.Settings.ThumbnailFolder = Url.Content("~/Content/FileManager/Thumbnails");
    //settings.Settings.AllowedFileExtensions = new string[] { ".doc,.docs,.pdf,.xls,.xlsx,.mp4" };


    settings.SettingsFileList.View = DevExpress.Web.FileListView.Thumbnails;


    if (ViewBag.opcion_admin=="1")
    {
        settings.SettingsUpload.Enabled = false;
        settings.SettingsUpload.UseAdvancedUploadMode = false;
        settings.SettingsUpload.AdvancedModeSettings.EnableMultiSelect = false;
        settings.SettingsEditing.AllowCreate = false;
        settings.SettingsEditing.AllowRename = false;
        settings.SettingsEditing.AllowMove = false;
        settings.SettingsEditing.AllowDelete = false;
        if (@ViewBag.tipo_tda=="BATA")
        {
            settings.SettingsPermissions.AccessRules.Add(new FileManagerFolderAccessRule { Path =(@ViewBag.estado_acceso=="0")? "Tiendas Calientes": "Tiendas Frias", Browse = Rights.Deny });
        }
        else
        {
            settings.SettingsPermissions.AccessRules.Add(new FileManagerFolderAccessRule { Path = (@ViewBag.cadena == "BG") ? "WB" : "BG", Browse = Rights.Deny });
        }
    }
    else
    {
        settings.SettingsUpload.Enabled = true;
        settings.SettingsUpload.UseAdvancedUploadMode = true;
        settings.SettingsUpload.AdvancedModeSettings.EnableMultiSelect = true;
        settings.SettingsEditing.AllowCreate = true;
        settings.SettingsEditing.AllowRename = true;
        settings.SettingsEditing.AllowMove = true;
        settings.SettingsEditing.AllowDelete = true;
    }


}).BindToFolder(Model).GetHtml()